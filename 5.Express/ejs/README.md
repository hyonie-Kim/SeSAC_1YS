# EJS 템플릿 엔진

- `npm i ejs --save`
- `app.set('view engine', 'ejs')` app.set을 통해서 템플릿 엔진을 설정한다.
- express에서 템플릿 엔진을 사용 할때 템플릿 엔진으로 만들어진 파일들은 views라는 폴더에 반드시 있어야한다.
- views폴더에 ejs 파일을 생성한다.

### `render()`

- sendFile(), send()로는 구현을 할수 없기 때문에 `render()`를 사용한다.
- `render()`는 템플릿 엔진으로 만 들어진 파일을 보여줄수 있고 템플릿엔진 파일에 자바스크립트 데이터를 넘겨 줄수도 있다.
- index.js코드에서 사용자가 루트("/") URL 접속을 했을 때 ejs 파일을 보여주고 싶을땐, res.render 그리고 파일명을 적어주면된다. `res.render("index")`

### 왜 EJS 템플릿 엔진을 사용하는지?

ejs파일은 HTML파일과 구조가 같다. 그런데 왜 ~~!?

1. HTML구조 내에서 인라인으로 자바스크립트 변수 혹은 자바스크립트 함수를 사용하는게 용이
2. 서버에서 보내는 데이터를 표현할수 있다.

### 클라이언트와 서버 데이터 주고 받기

index.js코드에서 render를 하는 동시에 데이터를 보내줄때, 파일명을 입력한 이후에 중괄호를 열고 오브젝트 데이터 형식으로 데이터를 보낼수 있다.

- 예를 들어 text라는 KEY로 "안녕하세요!!"를 보내면 index.ejs에서는 꺽새+퍼센트+이퀄 데이터의 키로 데이터를 표현할수 있다. `<h1><%= text %></h1>`

```javascript
app.get("/", (req, res) => {
  res.render("index", {
    text: "안녕하세요!!",
  });
});
```

### EJS 자바스크립트 문법 사용하기

- 만약에 이퀄을 제외를 하면 데이터는 가지고 있지만 사용자에게 표현은 해주지 않는다. `<h1><% text %></h1>`
- ejs에서는 꺽새와 퍼센트로 자바스크립트를 사용을 할수 있다.

```javascript
<body>
    <% if(flag){%>
    <h2>참 입니다.</h2>
    <% } else {%>
    <h2>거짓 입니다.</h2>
    <%}%>
</body>
```

- 예를 들어 서버에서 flag라는 KEY를 서버에서 보내면 `{flag:true}` 블리언 데이터의 값이 참인지 거짓인지 사용자에게 보여주는 영역을 제어 할수 있다.
- if문 뿐만 아니라 반복문도 사용 가능하다. index.js 코드에서 arrayData KEY에 배열을 담아서 보낸다. `{arrayData:[1,2,3]}` index.ejs에서는 ejs코드로 반복문 사용

## CSS 임포트

- public 폴더가 express static폴더 이기 때문에 js파일, css파일, 이미지 등은 현재폴더의 상태경로로 사용하면 된다.

## 레이아웃 형식 사용

include를 통해서 레이아웃 설정을 할수 있다.

- `<%- include('템플릿 파일 위치') -%> `
- `<%- include('header') -%>`

## 주석

- `<%# 주석 %>`
