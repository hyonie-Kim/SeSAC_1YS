<html>
  <head>
    <title>flie</title>
  </head>
  <style>
    span {
      border: 1px solid black;
    }
  </style>
  <body>
    <ul>
      <li>
        이미지 파일을 받아서 폼에 전송하고 서버는 그 이미지파일을 받아서
        저장하고 또 유저에게 보여주는 동작을 수행하려고 한다.
      </li>
      <li>
        이미지 파일을 폼에 담기 위해서는 input 태그에 type을 file로 주면 파일을
        선택할 수 있는 인풋 태그를 만들수있다.
      </li>
      <li>
        이미지를 위한 input 태그를 만들려면
        <span>accecpt="image/*"</span> 확장자가 이미지인 것만 선택할 수 있다.
        폼을 통해서 서버에 이미지파일만 전송 할 수 있다.
      </li>
      <li>
        이미지 파일을 폼을 통해서 전송하려면 form에 인코딩 타입을 바꿔줘야한다.
        폼 속성으로 <span>enctype="multipart/form-data"</span>라고 하면 폼에
        담겨져 있는 이미지 파일을 보낼 수 있다.
      </li>
      <li>
        노드 환경에서 사용할수 있는 패키지 - multipart/form-data를 처리하기 위한
        패키지는 중 주로 아래와 같은 4가지 패키지를 많이 사용한다.
        <ol>
          <li>busboy</li>
          <li>multipart</li>
          <li>formidable</li>
          <li>multer</li>
        </ol>
      </li>
      <li>
        폼을 통해서 이미지 하나만 보낼거면 네가지 패키지중 아무거나 사용해도
        상관없다.
      </li>
      <li>
        폼을 통해서 텍스트값, 이미지 파일 여러가지 데이터를 혼합해서 다룰때는
        <span>multipart</span>라는 패키지를 사용하는 것이 좋다.
      </li>
      <li>
        multipart 패키지를 사용할때는
        <span>npm i multiparty --save</span> 설치하고,
        <span>const multiparty = require("multiparty")</span>을 불러온다.
      </li>
    </ul>
    <h5>확장자가 이미지인 파일만 선택할수 있다.</h5>
    <hr />
    <form
      action="/fileUpload"
      method="post"
      enctype="multipart/form-data"
      style="display: flex; flex-direction: column; width: 300px"
    >
      <label for="title">제목:</label>
      <input type="text" name="title" id="title" />
      <label for="content">내용:</label>
      <textarea name="text" name="content" cols="30" rows="10"></textarea>
      <input type="file" name="image" accept="image/*" />
      <button type="submit">제출</button>
    </form>
    <h5>upload.none()</h5>
    <hr />
    <form action="/upload" method="POST" enctype="multipart/form-data">
      <input type="text" name="name" />
      <input type="file" name="userfile" />
      <button>업로드</button>
    </form>

    <h5>upload.single()</h5>
    <hr />
    <form action="/upload-single" method="POST" enctype="multipart/form-data">
      <input type="text" name="name" />
      <!-- multer 미들웨어에서 처리 O-->
      <input type="file" name="userfile" />
      <input type="text" name="name2" />
      <!-- multer 미들웨어에서 처리 X-->
      <button>업로드</button>
    </form>

    <h5>upload.array()</h5>
    <hr />
    <form action="/upload-array" method="POST" enctype="multipart/form-data">
      <!-- multiple속성이 지정된 함수가 온다면 upload.array 라는 함수로 받는다. -->
      <input type="file" name="userfile" multiple />
      <button>업로드</button>
    </form>

    <h5>upload.fields()</h5>
    <hr />
    <form action="/upload-fields" method="POST" enctype="multipart/form-data">
      <input type="file" name="userfile1" />
      <input type="file" name="userfile2" />
      <input type="file" name="userfile3" />
      <button>업로드</button>
    </form>
  </body>
</html>
